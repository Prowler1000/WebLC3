<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="%sveltekit.assets%/favicon.png" />
		<meta name="viewport" content="width=device-width" />
		%sveltekit.head%
	</head>
	<body class="dark">
		<div>%sveltekit.body%</div>

		<div id="invisible" style="visibility: hidden;">
			<div id="container" style="width: 1000px; height: 500px;"></div>
		</div>
		<script src="../node_modules/monaco-editor/min/vs/loader.js"></script>
		<script>
			require.config({ paths: { vs: '../node_modules/monaco-editor/min/vs' } });

			require(['vs/editor/editor.main'], function () {
				monaco.languages.register({
					id: 'myCustomLanguage'
				});
				monaco.languages.setMonarchTokensProvider('myCustomLanguage', {
					tokenizer: {
						root: [
							[/\[error.*/, 'custom-error'],
							[/\[notice.*/, 'custom-notice'],
							[/\[info.*/, 'custom-info'],
							[/\[[a-zA-Z 0-9:]+\]/, 'custom-date']
						]
					}
				});

				// Define a new theme that constains only rules that match this language
				monaco.editor.defineTheme('myCoolTheme', {
					colors: {},
					base: 'vs',
					inherit: false,
					rules: [
						{ token: 'custom-info', foreground: '808080' },
						{ token: 'custom-error', foreground: 'ff0000', fontStyle: 'bold' },
						{ token: 'custom-notice', foreground: 'FFA500' },
						{ token: 'custom-date', foreground: '008800' }
					]
				});

				var editor = monaco.editor.create(document.getElementById('container'), {
					theme: 'myCoolTheme',
					value: getCode(),
					language: 'myCustomLanguage'
				});
			});

			function getCode() {
				return [
					'[Sun Mar 7 16:02:00 2004] [notice] Apache/1.3.29 (Unix) configured -- resuming normal operations',
					'[Sun Mar 7 16:02:00 2004] [info] Server built: Feb 27 2004 13:56:37',
					'[Sun Mar 7 16:02:00 2004] [notice] Accept mutex: sysvsem (Default: sysvsem)',
					'[Sun Mar 7 16:05:49 2004] [info] [client xx.xx.xx.xx] (104)Connection reset by peer: client stopped connection before send body completed',
					'<11>httpd[31628]: [error] [client xx.xx.xx.xx] File does not exist: /usr/local/installed/apache/htdocs/squirrelmail/_vti_inf.html in 29-Mar 15:18:20.50 from xx.xx.xx.xx',
					'<11>httpd[25859]: [error] [client xx.xx.xx.xx] File does not exist: /usr/local/installed/apache/htdocs/squirrelmail/_vti_bin/shtml.exe/_vti_rpc in 29-Mar 15:18:20.54 from xx.xx.xx.xx'
				].join('\n');
			}
		</script>
	</body>
</html>